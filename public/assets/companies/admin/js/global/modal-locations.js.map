{"version":3,"sources":["../../../../../../resources/assets/js/src/companies/admin/global/modal-locations.js"],"names":["$","document","ready","on","elemState","optionState","localStorage","removeItem","text","trim","val","data","addClass","removeClass","ajax","url","type","dataType","complete","xhr","textStatus","success","html","forEach","item","id","name","append","error","errorThrown","bind","elemCity","optionCity","stateId","cityId","removeCity","attr","state_id","removeAttr","setItem","submit","event","preventDefault","locationRoute","route","targetRoute","getItem","window","open","location"],"mappings":"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","file":"modal-locations.js","sourcesContent":["$(document).ready(function() {\n\t\n\t$('.jq_locations').on('click', function() {\n\t\t\n\t\tlet elemState, optionState;\n\n\t\tlocalStorage.removeItem('filter_admin_city_id');\n\t\tlocalStorage.removeItem('filter_admin_state_id');\n\n\t\t$('.jq_name_location').text($.trim($(this).text()));\n\t\t$('#jq_location_route').val($(this).data('route'));\n\t\t$('#jq_modal_remove_city').val($(this).data('city'));\n\n\t\tif ($(this).data('city')) {\n\t\t\t$('#jq_div_combo_location_city')\n\t\t\t.addClass('hide');\n\t\t} else {\n\t\t\t$('#jq_div_combo_location_city')\n\t\t\t.removeClass('hide');\n\t\t}\n\n\t\tif ($(this).data('opentarget')) {\t\t\n\t\t\t$('#target_route').val($(this).data('opentarget'));\n\t\t}\t\t\t\n\n\t\telemState = $('#jq_combo_location_state');\n\n\t\t$.ajax({\n\n\t\t\turl: '/admin/ajax/state/active/',\n\t\t\ttype: 'GET',\n\t\t\tdata: '',\t\n\t\t\tdataType: 'json',\n\t\t\tcomplete: function(xhr, textStatus) {\n\t\t\t\n\t\t\t},\n\t\t\tsuccess: function(data, textStatus, xhr) {\n\t\t\t\telemState.html('<option value=\"\">Selecione o Estado</option>');\n\n\t            data.forEach((item) => {\n\t                optionState= $('<option>').val(item.id).text(item.name);\n\t                elemState.append(optionState);\n\t            });\n\t\t\t},\n\t\t\terror: function(xhr, textStatus, errorThrown) {\n\t\t\t\t//alert('Houve um erro ao carregar Estados do servidor!');\n\t\t\t}\n\n\t\t});\t \t\t \t\t\n\n\n\t});\n\n\t$('#jq_combo_location_state').bind('change', function () {\n\n\t\tlet elemCity, optionCity, stateId, cityId, removeCity;\n\n\t\tstateId = $(this).val();\n\n\t\telemCity = $('#jq_combo_location_city');\n\t\tremoveCity = $('input[name=\"modal_remove_city\"]').val();\n\t\tremoveCity = removeCity ? true : false;\n\n\t\tif (stateId <= 0) {\t\t\t\n\t\t\telemCity.attr('disabled', 'disabled');\n            elemCity.html('<option value=\"\">Selecione a Cidade</option>');\n            return false;\n\t\t}\n\n\t\tif (removeCity === false) {\n\t\n\t\t\t/* Act on the event */\n\t\t\t$.ajax({\n\n\t\t\t\turl: '/admin/ajax/city/active/',\n\t\t\t\ttype: 'GET',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {state_id: stateId},\n\n\t\t\t\tcomplete: function(xhr, textStatus) {\n\t\t\t\t//called when complete\n\t\t\t\t},\n\t\t\t\tsuccess: function(data, textStatus, xhr) {\n\t\t\t\t\n\t                elemCity.removeAttr('disabled');\n\t               \telemCity.attr('required', 'required');\n\t                elemCity.html('<option value=\"\">Selecione a Cidade</option>');\n\n\t                data.forEach((item) => {\n\t                    optionCity = $('<option>').val(item.id).text(item.name);\n\t                    elemCity.append(optionCity);\n\t                });\n\n\t\t\t\t},\n\t\t\t\terror: function(xhr, textStatus, errorThrown) {\n\t\t\t\t\t//alert('Houve um erro ao carregar Cidades do servidor!');\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t});\n\n\t$(document).on('change', '#jq_combo_location_state', function () {\n\t\tlocalStorage.setItem('filter_admin_state_id', $(this).val());\n\t});\n\t\n\t$(document).on('change', '#jq_combo_location_city', function () {\n\t\tlocalStorage.setItem('filter_admin_city_id', $(this).val());\n\t});\n\n\t$('#form-locations').submit(function(event) {\n\t\tevent.preventDefault();\n\n\t\tlet cityId, \n\t\t\tstateId, \n\t\t\tlocationRoute, \n\t\t\troute, \n\t\t\ttargetRoute;\t\t\n\n\t\tstateId = localStorage.getItem('filter_admin_state_id');\n\t\tcityId = localStorage.getItem('filter_admin_city_id');\n\n\t\ttargetRoute = $('input[name=\"target_route\"]').val();\n\t\tlocationRoute = $('input[name=\"location_route\"]').val();\n\n\t\tif (cityId > 0 && stateId > 0) {\n\t\t\troute = `${locationRoute}/${cityId}`;\n        } else if(stateId > 0) {\n\t\t\troute = `${locationRoute}/${stateId}`;\n        } else {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tlocalStorage.removeItem('filter_admin_state_id');\n\t\tlocalStorage.removeItem('filter_admin_city_id');\n\n        if (targetRoute) {\n\t\t\twindow.open(route, targetRoute);\n        } else {\n\t\t\twindow.location = route;          \t\n        }\n\n\t});\n\n});\n"]}