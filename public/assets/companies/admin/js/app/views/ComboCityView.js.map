{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/views/ComboCityView.js"],"names":["ComboCityView","$","bind","result","stateId","element","val","html","ListCompanyService","citiesActive","done","data","removeAttr","forEach","item","optionCity","id","text","name","append","fail","cityId","urlParam","selected","attr","parameters","state_id","url","HttpService","ajax"],"mappings":"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","file":"ComboCityView.js","sourcesContent":["class ComboCityView {\n\n    static cities() {\n\n        $('select[name=\"state\"]').bind('change', function () {\n\n            let result, stateId, element;\n\n            stateId = $(this).val();\n\n            if (stateId <= 0) {\n                return false;\n            }\n\n            element = $('select[name=\"city\"]');\n            element.html('<option value=\"\">Carregando...</option>');\n\n            result = ListCompanyService.citiesActive(stateId);\n\n            result.done((data) => {\n\n                element.removeAttr('disabled');\n                element.html('<option value=\"\">Selecione a Cidade</option>');\n\n                data.forEach((item) => {\n                    let optionCity;\n                    optionCity = $('<option>').val(item.id).text(item.name);\n                    element.append(optionCity);\n                });\n\n            });\n\n            result.fail(() => {\n                //alert('Houve um erro ao carregar Cidades do servidor!');\n            });\n\n\n        });\n\n        let stateId, cityId;\n\n        stateId = $.urlParam('state');\n        cityId = $.urlParam('city');\n\n        if (stateId > 0 && cityId > 0) {\n\n            if (stateId <= 0) {\n                return false;\n            }\n\n            let result, selected, element;\n\n            element = $('select[name=\"city\"]');\n            element.html('<option value=\"\">Carregando...</option>');\n\n            result = ListCompanyService.citiesActive(stateId);\n\n            result.done((data) => {\n\n                element.removeAttr('disabled');\n                element.html('<option value=\"\">Selecione a Cidade</option>');\n\n                data.forEach((item) => {\n\n                    let optionCity;\n\n                    if(cityId > 0) {\n\n                        if(item.id == cityId) {\n                            selected = true;\n                        } else {\n                            selected = false;\n                        }\n\n                        optionCity = $('<option>')\n                                .val(item.id)\n                                .text(item.name)\n                                .attr(\"selected\", selected);\n\n                    } else {\n\n                        optionCity = $('<option>')\n                                .val( item.id )\n                                .text( item.name );\n\n                    }\n\n                    element.append(optionCity);\n\n                });\n\n            });\n\n            result.fail(() => {\n                //alert('Houve um erro ao carregar Cidades do servidor!');\n            });\n\n\n        }\n\n    }\n\n    static report_cities() {\n\n        $('select[name=\"state\"]').bind('change', function () {\n\n            let result, stateId, element;\n\n            stateId = $(this).val();\n\n            if (stateId <= 0) {\n                return false;\n            }\n\n            element = $('select[name=\"city\"]');\n            element.html('<option value=\"\">Carregando...</option>');\n\n            result = ListCompanyService.citiesActive(stateId);\n\n            result.done((data) => {\n\n                element.removeAttr('disabled');\n                element.html('<option value=\"\">Selecione a Cidade</option>');\n\n                data.forEach((item) => {\n                    let optionCity;\n                    optionCity = $('<option>').val(item.id).text(item.name);\n                    element.append(optionCity);\n                });\n\n            });\n\n            result.fail(() => {\n                //alert('Houve um erro ao carregar Cidades do servidor!');\n            });\n\n        });\n\n    }\n\n    static cities_edit_company() {\n\n        let stateId, cityId;\n\n        stateId = $('meta[name=\"state_id\"]').attr(\"content\");\n        cityId = $('meta[name=\"city_id\"]').attr(\"content\");\n\n        if (stateId > 0 && cityId > 0) {\n\n            if (stateId <= 0) {\n                return false;\n            }\n\n            let result, selected, element;\n\n            element = $('select[name=\"city_id\"]');\n            element.html('<option value=\"\">Carregando...</option>');\n\n            let parameters = {\n                data: {state_id: stateId},\n                url: '/admin/ajax/city/active/'\n            };\n\n            result = HttpService.ajax(parameters);\n\n            result.done((data) => {\n\n                element.removeAttr('disabled');\n                element.html('<option value=\"\">Selecione a Cidade</option>');\n\n                data.forEach((item) => {\n\n                    let optionCity;\n\n                    if(cityId > 0) {\n\n                        if(item.id == cityId) {\n                            selected = true;\n                        } else {\n                            selected = false;\n                        }\n\n                        optionCity = $('<option>')\n                                .val(item.id)\n                                .text(item.name)\n                                .attr(\"selected\", selected);\n\n                    } else {\n\n                        optionCity = $('<option>')\n                                .val( item.id )\n                                .text( item.name );\n\n                    }\n\n                    element.append(optionCity);\n\n                });\n\n            });\n\n            result.fail(() => {\n                //alert('Houve um erro ao carregar Cidades do servidor!');\n            });\n\n        }\n\n    }\n\n}\n"]}