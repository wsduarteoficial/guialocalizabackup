{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/services/CompanyAddressService.js"],"names":["CompanyAddressService","cityId","destrict","$","on","val","autocomplete","minChars","maxHeight","serviceUrl","params","clearCache","onSelect","suggestion","data","place","document","txt","html","stateId","result","element","parameters","state_id","url","HttpService","ajax","done","selected","removeAttr","forEach","item","optionCity","id","text","name","attr","append","fail","cep","addClass","bairro","closest","removeClass","logradouro","city","find","state","loadCities","bind","number","replace","toString","length","response","fillData"],"mappings":";;;;;;IAAMA,qB;;;;;;;+CAEqC;AAAA,gBAAXC,MAAW,uEAAJ,EAAI;;;AAEnC,gBAAIC,WAAWC,EAAE,sBAAF,CAAf;;AAEAA,cAAED,QAAF,EAAYE,EAAZ,CAAe,SAAf,EAA0B,YAAW;;AAEjC,oBAAIH,SAASE,EAAE,sCAAF,EAA2CE,GAA3C,EAAb;;AAEAF,kBAAED,QAAF,EAAYI,YAAZ,CAAyB;AACrBC,8BAAU,CADW;AAErBC,+BAAW,GAFU;AAGrBC,gCAAY,gCAHS;AAIrBC,4BAAQ,EAAE,WAAYT,MAAd,EAJa;AAKrBU,gCAAY,IALS;AAMrBC,8BAAU,kBAAUC,UAAV,EAAsB;AAC5BV,0BAAE,wBAAF,EAA4BE,GAA5B,CAAgCQ,WAAWC,IAA3C;AACH;AARoB,iBAAzB;AAWH,aAfD;AAiBH;;;4CAE0B;;AAEvB,gBAAIC,QAAQZ,EAAE,mBAAF,CAAZ;;AAEAA,cAAEY,KAAF,EAASX,EAAT,CAAY,SAAZ,EAAuB,YAAW;;AAE9B,oBAAIH,SAASE,EAAE,sCAAF,EAA2CE,GAA3C,EAAb;;AAEAF,kBAAEY,KAAF,EAAST,YAAT,CAAsB;AAClBC,8BAAU,CADQ;AAElBC,+BAAW,GAFO;AAGlBC,gCAAY,6BAHM;AAIlBC,4BAAQ,EAAE,WAAYT,MAAd,EAJU;AAKlBU,gCAAY,IALM;AAMlBC,8BAAU,kBAAUC,UAAV,EAAsB;AAC5BV,0BAAE,sBAAF,EAA0BE,GAA1B,CAA8BQ,WAAWC,IAAzC;AACH;AARiB,iBAAtB;AAWH,aAfD;AAiBH;;;kCAEgB;;AAEbX,cAAEa,QAAF,EAAYZ,EAAZ,CAAe,OAAf,EAAwB,mBAAxB,EAA6C,YAAW;AACpD,oBAAIa,MAAMd,EAAE,IAAF,EAAQe,IAAR,EAAV;AACAf,kBAAE,qBAAF,EAAyBE,GAAzB,CAA6BY,GAA7B;AACH,aAHD;;AAKAd,cAAEa,QAAF,EAAYZ,EAAZ,CAAe,OAAf,EAAwB,sBAAxB,EAAgD,YAAW;AACvD,oBAAIa,MAAMd,EAAE,IAAF,EAAQe,IAAR,EAAV;AACAf,kBAAE,wBAAF,EAA4BE,GAA5B,CAAgCY,GAAhC;AACH,aAHD;AAKH;;;mCAEiBE,O,EAASlB,M,EAAQ;;AAE/B,gBAAImB,eAAJ;AAAA,gBAAYC,gBAAZ;;AAEA,gBAAIF,WAAW,CAAf,EAAkB;AACd,uBAAO,KAAP;AACH;;AAEDE,sBAAUlB,EAAE,wBAAF,CAAV;AACAkB,oBAAQH,IAAR,CAAa,yCAAb;;AAEA,gBAAII,aAAa;AACbR,sBAAM,EAACS,UAAUJ,OAAX,EADO;AAEbK,qBAAK;AAFQ,aAAjB;;AAKAJ,qBAASK,YAAYC,IAAZ,CAAiBJ,UAAjB,CAAT;;AAEAF,mBAAOO,IAAP,CAAY,UAACb,IAAD,EAAU;;AAElB,oBAAIc,iBAAJ;;AAEAP,wBAAQQ,UAAR,CAAmB,UAAnB;AACAR,wBAAQH,IAAR,CAAa,8CAAb;;AAEAJ,qBAAKgB,OAAL,CAAa,UAACC,IAAD,EAAU;;AAEnB,wBAAIC,mBAAJ;;AAEA,wBAAG/B,SAAS,CAAZ,EAAe;;AAEX,4BAAG8B,KAAKE,EAAL,IAAWhC,MAAd,EAAsB;AAClB2B,uCAAW,IAAX;AACH,yBAFD,MAEO;AACHA,uCAAW,KAAX;AACH;;AAEDI,qCAAa7B,EAAE,UAAF,EACJE,GADI,CACA0B,KAAKE,EADL,EAEJC,IAFI,CAECH,KAAKI,IAFN,EAGJC,IAHI,CAGC,UAHD,EAGaR,QAHb,CAAb;AAKH,qBAbD,MAaO;;AAEHI,qCAAa7B,EAAE,UAAF,EACJE,GADI,CACC0B,KAAKE,EADN,EAEJC,IAFI,CAEEH,KAAKI,IAFP,CAAb;AAKH;;AAEDd,4BAAQgB,MAAR,CAAeL,UAAf;AAEH,iBA5BD;AA8BH,aArCD;;AAuCAZ,mBAAOkB,IAAP,CAAY,YAAM;AACd;AACH,aAFD;AAIH;;;iCAEexB,I,EAAM;;AAElB,gBAAI,OAAOA,KAAKyB,GAAZ,IAAmB,WAAvB,EAAoC;;AAEhCpC,kBAAE,wBAAF,EAA4BE,GAA5B,CAAgC,EAAhC;AACAF,kBAAE,qBAAF,EAAyBE,GAAzB,CAA6B,EAA7B;AACAF,kBAAE,uBAAF,EAA2BE,GAA3B,CAA+B,EAA/B;AACAF,kBAAE,0BAAF,EAA8BE,GAA9B,CAAkC,EAAlC;AACAF,kBAAE,UAAF,EAAcqC,QAAd,CAAuB,MAAvB;;AAEA,uBAAO,KAAP;AACH;;AAED,gBAAI,OAAO1B,KAAK2B,MAAZ,KAAuB,WAAvB,IACG3B,KAAK2B,MAAL,KAAgB,IADvB,EAC6B;;AAEzB,oBAAI3B,KAAK2B,MAAT,EAAiB;;AAEbtC,sBAAE,sBAAF,EACKuC,OADL,CACa,UADb,EAEKC,WAFL,CAEiB,MAFjB;;AAICxC,sBAAE,sBAAF,EAA0B+B,IAA1B,CAA+BpB,KAAK2B,MAApC;AAEJ;AAGJ;;AAED,gBAAI,OAAO3B,KAAK8B,UAAZ,KAA2B,WAA3B,IACG9B,KAAK8B,UAAL,KAAoB,IAD3B,EACiC;;AAE7B,oBAAI9B,KAAK8B,UAAT,EAAqB;;AAEjBzC,sBAAE,mBAAF,EACKuC,OADL,CACa,UADb,EAEKC,WAFL,CAEiB,MAFjB;;AAIAxC,sBAAE,mBAAF,EAAuB+B,IAAvB,CAA4BpB,KAAK8B,UAAjC;AAEH;AAEJ;;AAED,gBAAI,OAAO9B,KAAK+B,IAAZ,KAAqB,WAArB,IAAoC/B,KAAK+B,IAAL,CAAUZ,EAAV,GAAe,CAAvD,EAA0D;;AAEtD9B,kBAAE,uBAAF,EAA2BE,GAA3B,CAA+BS,KAAK+B,IAAL,CAAUV,IAAzC;AACAhC,kBAAE,yBAAF,EAA6B2C,IAA7B,oBAAmDhC,KAAKiC,KAAL,CAAWd,EAA9D,SAAsEG,IAAtE,CAA2E,UAA3E,EAAuF,UAAvF;;AAEApC,sCAAsBgD,UAAtB,CAAiClC,KAAKiC,KAAL,CAAWd,EAA5C,EAAgDnB,KAAK+B,IAAL,CAAUZ,EAA1D;AAEH;AAEJ;;;iCAEe;;AAEZ9B,cAAE,yBAAF,EAA6B8C,IAA7B,CAAkC,QAAlC,EAA4C,YAAY;;AAEpD,oBAAI7B,eAAJ;AAAA,oBAAYD,gBAAZ;AAAA,oBAAqBE,gBAArB;;AAEAF,0BAAUhB,EAAE,IAAF,EAAQE,GAAR,EAAV;AACA,oBAAIc,WAAW,CAAf,EAAkB;AACd,2BAAO,KAAP;AACH;;AAEDE,0BAAUlB,EAAE,wBAAF,CAAV;AACAkB,wBAAQH,IAAR,CAAa,yCAAb;;AAEA,oBAAII,aAAa;AACbR,0BAAM,EAACS,UAAUJ,OAAX,EADO;AAEbK,yBAAK;AAFQ,iBAAjB;;AAKAJ,yBAASK,YAAYC,IAAZ,CAAiBJ,UAAjB,CAAT;;AAEAF,uBAAOO,IAAP,CAAY,UAACb,IAAD,EAAU;;AAElBO,4BAAQQ,UAAR,CAAmB,UAAnB;AACAR,4BAAQH,IAAR,CAAa,8CAAb;;AAEAJ,yBAAKgB,OAAL,CAAa,UAACC,IAAD,EAAU;AACnB,4BAAIC,mBAAJ;AACAA,qCAAa7B,EAAE,UAAF,EAAcE,GAAd,CAAkB0B,KAAKE,EAAvB,EAA2BC,IAA3B,CAAgCH,KAAKI,IAArC,CAAb;AACAd,gCAAQgB,MAAR,CAAeL,UAAf;AACH,qBAJD;AAMH,iBAXD;;AAaAZ,uBAAOkB,IAAP,CAAY,YAAM;AACd;AACH,iBAFD;AAIH,aApCD;AAsCH;;;uCAEqB;;AAElBnC,cAAE,wBAAF,EAA4BC,EAA5B,CAA+B,OAA/B,EAAwC,YAAW;;AAE/C,oBAAI8C,SAAS/C,EAAE,IAAF,EAAQE,GAAR,GAAc8C,OAAd,CAAsB,SAAtB,EAAiC,EAAjC,EAAqCC,QAArC,EAAb;;AAEA,oBAAIF,OAAOG,MAAP,IAAiB,CAArB,EAAwB;;AAEpBlD,sBAAE,aAAF,EAAiB0B,UAAjB,CAA4B,UAA5B;;AAEA,wBAAIP,aAAa;AACbR,8BAAM,EAAEoC,QAAQA,MAAV,EADO;AAEb1B,6BAAK;AAFQ,qBAAjB;;AAKA,wBAAI8B,WAAW7B,YAAYC,IAAZ,CAAiBJ,UAAjB,CAAf;;AAEAgC,6BAAS3B,IAAT,CAAc,UAACb,IAAD,EAAU;AACpBd,8CAAsBuD,QAAtB,CAA+BzC,IAA/B;AACH,qBAFD;;AAIA;AACA;AACA;AACA;AAEH;AAEJ,aA1BD;AA4BH","file":"CompanyAddressService.js","sourcesContent":["class CompanyAddressService {\n\n    static autoCompleteDistrict(cityId='') {\n\n        let destrict = $('input[name=district]');\n\n        $(destrict).on('keydown', function() {\n\n            let cityId = $(\"select[name=city_id] option:selected\" ).val();\n\n            $(destrict).autocomplete({\n                minChars: 2,\n                maxHeight: 200,\n                serviceUrl: '/admin/ajax/district/city/all/',\n                params: { 'city_id' : cityId },\n                clearCache: true,\n                onSelect: function (suggestion) {\n                    $('input[name=district_id').val(suggestion.data);\n                }\n            });\n\n        });\n\n    }\n\n    static autoCompletePlace() {\n\n        let place = $('input[name=place]');\n\n        $(place).on('keydown', function() {\n\n            let cityId = $(\"select[name=city_id] option:selected\" ).val();\n\n            $(place).autocomplete({\n                minChars: 2,\n                maxHeight: 200,\n                serviceUrl: '/admin/ajax/place/city/all/',\n                params: { 'city_id' : cityId },\n                clearCache: true,\n                onSelect: function (suggestion) {\n                    $('input[name=place_id]').val(suggestion.data);\n                }\n            });\n\n        });\n\n    }\n\n    static suggest() {\n\n        $(document).on('click', '.jq_suggest_place', function() {\n            let txt = $(this).html();\n            $('input[name=\"place\"]').val(txt);\n        });\n\n        $(document).on('click', '.jq_suggest_district', function() {\n            let txt = $(this).html();\n            $('input[name=\"district\"]').val(txt);\n        });\n\n    }\n\n    static loadCities(stateId, cityId) {\n\n        let result, element;\n\n        if (stateId <= 0) {\n            return false;\n        }\n\n        element = $('select[name=\"city_id\"]');\n        element.html('<option value=\"\">Carregando...</option>');\n\n        let parameters = {\n            data: {state_id: stateId},\n            url: '/admin/ajax/city/active/'\n        };\n\n        result = HttpService.ajax(parameters);\n\n        result.done((data) => {\n\n            let selected;\n\n            element.removeAttr('disabled');\n            element.html('<option value=\"\">Selecione a Cidade</option>');\n\n            data.forEach((item) => {\n\n                let optionCity;\n\n                if(cityId > 0) {\n\n                    if(item.id == cityId) {\n                        selected = true;\n                    } else {\n                        selected = false;\n                    }\n\n                    optionCity = $('<option>')\n                            .val(item.id)\n                            .text(item.name)\n                            .attr(\"selected\", selected);\n\n                } else {\n\n                    optionCity = $('<option>')\n                            .val( item.id )\n                            .text( item.name );\n\n\n                }\n\n                element.append(optionCity);\n\n            });\n\n        });\n\n        result.fail(() => {\n            //alert('Houve um erro ao carregar Cidades do servidor!');\n        });\n\n    }\n\n    static fillData(data) {\n\n        if (typeof data.cep == 'undefined') {\n\n            $('input[name=\"district\"]').val('');\n            $('input[name=\"place\"]').val('');\n            $('input[name=\"numeral\"]').val('');\n            $('input[name=\"complement\"]').val('');\n            $('.suggest').addClass('hide');\n\n            return false;\n        }\n\n        if (typeof data.bairro !== 'undefined'\n            && data.bairro !== null) {\n\n            if (data.bairro) {\n\n                $('.jq_suggest_district')\n                    .closest('.suggest')\n                    .removeClass('hide');\n\n                 $('.jq_suggest_district').text(data.bairro);\n\n            }\n\n\n        }\n\n        if (typeof data.logradouro !== 'undefined'\n            && data.logradouro !== null) {\n\n            if (data.logradouro) {\n\n                $('.jq_suggest_place')\n                    .closest('.suggest')\n                    .removeClass('hide');\n\n                $('.jq_suggest_place').text(data.logradouro);\n\n            }\n\n        }\n\n        if (typeof data.city !== 'undefined' && data.city.id > 0) {\n\n            $('input[name=\"city_id\"]').val(data.city.name);\n            $('select[name=\"state_id\"]').find(`option[value=\"${data.state.id}\"]`).attr(\"selected\", \"selected\");\n\n            CompanyAddressService.loadCities(data.state.id, data.city.id);\n\n        }\n\n    }\n\n    static cities() {\n\n        $('select[name=\"state_id\"]').bind('change', function () {\n\n            let result, stateId, element;\n\n            stateId = $(this).val();\n            if (stateId <= 0) {\n                return false;\n            }\n\n            element = $('select[name=\"city_id\"]');\n            element.html('<option value=\"\">Carregando...</option>');\n\n            let parameters = {\n                data: {state_id: stateId},\n                url: '/admin/ajax/city/active/'\n            };\n\n            result = HttpService.ajax(parameters);\n\n            result.done((data) => {\n\n                element.removeAttr('disabled');\n                element.html('<option value=\"\">Selecione a Cidade</option>');\n\n                data.forEach((item) => {\n                    let optionCity;\n                    optionCity = $('<option>').val(item.id).text(item.name);\n                    element.append(optionCity);\n                });\n\n            });\n\n            result.fail(() => {\n                //alert('Houve um erro ao carregar Cidades do servidor!');\n            });\n\n        });\n\n    }\n\n    static checkZipCode() {\n\n        $('input[name=zipcode_id]').on('keyup', function() {\n\n            let number = $(this).val().replace(/[^0-9]/g, '').toString();\n\n            if (number.length >= 8) {\n\n                $('.jq_address').removeAttr(\"disabled\");\n\n                let parameters = {\n                    data: { number: number},\n                    url: '/admin/ajax/address/check/zipcode/'\n                };\n\n                let response = HttpService.ajax(parameters);\n\n                response.done((data) => {\n                    CompanyAddressService.fillData(data);\n                });\n\n                // response.fail(() => {\n                //     //alert('Houve um erro na solicitação do pedido!');\n                //     //location.reload();\n                // });\n\n            }\n\n        });\n\n    }\n\n}\n"]}