{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/services/ListPlaceService.js"],"names":["ListPlaceService","element","$","on","elemStatus","_changeStatus","event","preventDefault","values","parameters","response","serialize","fadeOut","modal","data","url","HttpService","ajax","done","id","_trTable","toastr","exists","alert","name","location","reload","fail","submit","place_id","text","setInterval","textContent","elemHtml","placeName","placeId","dataTo","confirm","icon","type","typeAnimated","title","content","buttons","cancel","keys","action","btnClass","parents","addClass","hide","document","typeStatus","is","val","removeClass","active","html","city_state","prepend","bootstrapToggle"],"mappings":"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","file":"ListPlaceService.js","sourcesContent":["class ListPlaceService {\n\n    updateStatus(element) {\n\n        $(element).on('change', function () {\n\n            let elemStatus = $(this);\n            ListPlaceService._changeStatus(elemStatus);\n\n        });\n    }\n\n    static changeStatusDocument(document) {\n\n        ListPlaceService._changeStatus(document);\n    }\n\n    static _changeStatus(elemStatus) {\n\n        let textContent,\n            typeStatus,\n            dataTo,\n            parameters,\n            response;\n\n        if (elemStatus.is(\":checked\")) {\n            typeStatus = 'ON';\n        } else {\n            typeStatus = 'OFF';\n        }\n\n        textContent = `Tem certeza que deseja mudar o status para <strong>${typeStatus}</strong>\n            em <strong>${elemStatus.data('name')}</strong>?`;\n\n        $.confirm({\n            icon: 'fa fa-info-circle',\n            type: 'dark',\n            typeAnimated: true,\n            title: 'Confirmação!',\n            content: textContent,\n            buttons: {\n                cancel: {\n                    text: 'Cancelar',\n                    keys: ['esc'],\n                    action: function () {\n                        $.alert('Cancelado!');\n                        location.reload();\n                    }\n\n                },\n\n                confirm: {\n                    text: 'Confirmar',\n                    btnClass: 'btn-blue',\n                    keys: ['enter'],\n                    action: function () {\n\n                        if (elemStatus.is(\":checked\")) {\n\n                            elemStatus.val(1).parents('tr')\n                                .addClass('color_status');\n\n                        } else {\n\n                            elemStatus.val(0).parents('tr')\n                                .removeClass('color_status');\n                        }\n\n                        dataTo = {\n                            id: elemStatus.data('id'),\n                            active: elemStatus.val()\n                        };\n\n                        parameters = {\n                            data: dataTo,\n                            url: '/admin/ajax/place/update/status/'\n                        };\n\n                        response = HttpService.ajax(parameters);\n\n                        response.done((data) => {\n\n                            if (data.active <= 0) {\n                                toastr[\"info\"](\"Logradouro foi desativado com sucesso!\");\n                            } else {\n                                toastr[\"success\"](\"Logradouro foi ativado com sucesso!\");\n                            }\n\n                        });\n\n                        response.fail(() => {\n                            //alert('Houve um erro na solicitação do pedido!');\n                            location.reload();\n                        });\n\n                    }\n\n                }\n\n            }\n\n        });\n    }\n\n    registerPlace(element) {\n\n        $(element).on('submit', function( event ) {\n\n            event.preventDefault();\n\n            let values, parameters, response;\n\n            values = $(this).serialize();\n\n            $('.modal-register').fadeOut('5000', function() {\n\n                $(this).modal('hide');\n\n            });\n\n            parameters = {\n                data: values,\n                url: '/admin/ajax/place/register/'\n            };\n\n            response = HttpService.ajax(parameters);\n\n            response.done((data) => {\n\n                if (data.id>0) {\n\n                    ListPlaceService._trTable(data);\n\n                    toastr[\"success\"](\"Novo Logradouro cadastrado com sucesso!\");\n                }\n                else {\n\n                    if (data.exists===true) {\n                        alert(`Logradouro ${data.name} já existe na base de dados!`);\n                    } else {\n                        //alert('Houve um erro na solicitação do pedido!');\n                        location.reload();\n\n                    }\n\n                }\n\n            });\n\n            response.fail(() => {\n                //alert('Houve um erro na solicitação do pedido!');\n                location.reload();\n            });\n\n        });\n\n    }\n\n    static _trTable(data) {\n\n\n        let html;\n\n        html = `\n            <tr class=\"odd gradeX color_status\">\n            <td>${data.id}</td>\n            <td>${data.name}</td>\n            <td>${data.city_state}</td>\n\n            <td class=\"center\">\n                <input type=\"checkbox\" id=\"toogle-register\" class=\"jq_status_place\" value=\"0\" data-id=\"${data.id}\" data-name=\"${data.name}\" data-toggle=\"toggle\" data-onstyle=\"success\">\n            </td>\n\n            <td>\n                <div class=\"btn-group\">\n                    <button class=\"btn btn-xs green dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\"> Ação\n                        <i class=\"fa fa-angle-down\"></i>\n                    </button>\n                    <ul class=\"dropdown-menu\" role=\"menu\">\n\n                        <li>\n                            <a href=\"#\"  data-id=\"${data.id}\" data-name=\"${data.name}\" onclick=\"ListPlaceController.setDataModalEdit(this.getAttribute('data-id'), this.getAttribute('data-name') );\"  data-target=\".modal-edit\" data-toggle=\"modal\">\n                                <i class=\"fa fa-edit\"></i> Editar\n                            </a>\n                        </li>\n\n                        <li>\n                            <a href=\"#\" class=\"jq_remove_place\">\n                                <i class=\"fa fa-times\"></i> Remover </a>\n                        </li>\n\n                    </ul>\n                </div>\n            </td>\n\n        </tr>`;\n\n\n        $(\".appendedContainer\").prepend(html);\n        $('#toogle-register').bootstrapToggle();\n        $.alert('Dados cadastrados com Sucesso. <br>Atualizando lista de registros!');\n\n        setInterval(() => {\n          location.reload();\n        }, 3000);\n\n\n    }\n\n    editPlace(element) {\n\n        $(element).submit(function( event ) {\n\n            event.preventDefault();\n\n            let values, parameters, response;\n\n            values = $(this).serialize();\n\n            $('.modal-edit').fadeOut('5000', function() {\n                $(this).modal('hide');\n            });\n\n            parameters = {\n                data: values,\n                url: '/admin/ajax/place/edit/'\n            };\n\n            response = HttpService.ajax(parameters);\n\n            response.done((data) => {\n\n                if (data.place_id > 0) {\n\n                    $(`.jq_placeName_${data.place_id}`).text(data.name);\n                    toastr[\"success\"](\"Logradouro alterado com sucesso!\");\n                    $.alert('Dados alterados com Sucesso. <br>Atualizando lista de registros!');\n\n                    setInterval(() => {\n                      location.reload();\n                    }, 3000);\n                }\n                else {\n                    if (data.exists===true) {\n                        alert(`Logradouro ${data.name} já existe na base de dados!`);\n                    } else {\n                        //alert('Houve um erro na solicitação do pedido!');\n                        location.reload();\n\n                    }\n                }\n\n            });\n\n            response.fail(() => {\n                //alert('Houve um erro na solicitação do pedido!');\n                location.reload();\n            });\n\n        });\n\n    }\n\n    removePlace(element) {\n\n        $(element).on('click', function() {\n\n            let textContent,\n            elemHtml,\n            placeName,\n            placeId,\n            dataTo,\n            parameters,\n            response;\n\n            elemHtml = $(this);\n            placeId = $(this).data('id');\n            placeName = $(this).data('name');\n\n            textContent = `Tem certeza que deseja remover o Logradouro <strong>${placeName}</strong> permanentemente?`;\n\n            $.confirm({\n                icon: 'fa fa-info-circle',\n                type: 'dark',\n                typeAnimated: true,\n                title: 'Confirmação!',\n                content: textContent,\n                buttons: {\n                    cancel: {\n                        text: 'Cancelar',\n                        keys: ['esc'],\n                        action: function () {\n                            $.alert('Cancelado!');\n                        }\n\n                    },\n\n                    confirm: {\n                        text: 'Confirmar',\n                        btnClass: 'btn-blue',\n                        keys: ['enter'],\n                        action: function () {\n\n                            elemHtml.parents('tr')\n                            .addClass('item_inative').hide(4000);\n\n                            dataTo = {\n                                id: placeId,\n                            };\n\n                            parameters = {\n                                data: dataTo,\n                                url: '/admin/ajax/place/remove/'\n                            };\n\n                            response = HttpService.ajax(parameters);\n\n                            response.done((data) => {\n\n                                if (data) {\n                                    toastr[\"success\"](\"O Logradouro foi excluído com sucesso!\");\n                                } else {\n                                    //alert('Houve um erro na solicitação do pedido!');\n                                    location.reload();\n                                }\n\n                            });\n\n                            response.fail(() => {\n                                //alert('Houve um erro na solicitação do pedido!');\n                                location.reload();\n                            });\n\n                        }\n\n                    }\n\n                }\n\n            });\n\n        });\n\n    }\n\n}\n"]}