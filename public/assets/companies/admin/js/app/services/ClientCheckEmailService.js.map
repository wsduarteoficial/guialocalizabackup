{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/services/ClientCheckEmailService.js"],"names":["ClientCheckEmailService","$","document","on","email","val","ValidateHelper","validateEmail","_checkData","element","cpf_cnpj","replace","toString","parameters","data","url","response","HttpService","ajax","done","res","id","boxSwal","company_name","fail","nameCompany","swal","title","text","type","html","confirmButtonClass","confirmButtonText","closeOnConfirm","closeOnCancel","isConfirm"],"mappings":";;;;;;IAAMA,uB;;;;;;;2CAEwB;;AAEtBC,cAAEC,QAAF,EAAYC,EAAZ,CAAe,MAAf,EAAuB,6BAAvB,EAAsD,YAAY;;AAE9D,oBAAIC,QAAQH,EAAE,IAAF,EAAQI,GAAR,EAAZ;;AAEA,oBAAGC,eAAeC,aAAf,CAA8BH,KAA9B,CAAH,EAA2C;AACvCJ,4CAAwBQ,UAAxB,CAAoCJ,KAApC;AACH;AAEJ,aARD;;AAUAH,cAAEC,QAAF,EAAYC,EAAZ,CAAe,MAAf,EAAuB,+BAAvB,EAAwD,YAAY;;AAEhE,oBAAIC,QAAQH,EAAE,IAAF,EAAQI,GAAR,EAAZ;;AAEA,oBAAGC,eAAeC,aAAf,CAA8BH,KAA9B,CAAH,EAA2C;AACvCJ,4CAAwBQ,UAAxB,CAAoCJ,KAApC;AACH;AAEJ,aARD;AAUH;;;mCAEiBA,K,EAAOK,O,EAAS;;AAE9B,gBAAIC,WAAWT,EAAE,wBAAF,EACEI,GADF,GAEEM,OAFF,CAEU,SAFV,EAEqB,EAFrB,EAEyBC,QAFzB,EAAf;;AAIA,gBAAIC,aAAa;AACbC,sBAAM;AACFV,gCADE;AAEFM;AAFE,iBADO;AAKbK,qBAAK;AALQ,aAAjB;;AAQA,gBAAIC,WAAWC,YAAYC,IAAZ,CAAiBL,UAAjB,CAAf;;AAEAG,qBAASG,IAAT,CAAc,UAACC,GAAD,EAAS;AACnB,oBAAGA,IAAIC,EAAJ,GAAS,CAAZ,EAAgB;AACZrB,4CAAwBsB,OAAxB,CAAgCb,OAAhC,EAAyCW,IAAIG,YAA7C,EAA2DH,IAAIV,QAA/D;AACH;AACJ,aAJD;;AAMAM,qBAASQ,IAAT,CAAc,YAAM;AAChB;AACA;AACH,aAHD;AAKH;;;gCAEcf,O,EAASgB,W,EAAaf,Q,EAAU;;AAE3CgB,iBAAK;;AAEDC,mHAAsFF,WAAtF,sBAFC;AAGDG,4CAA0BlB,QAA1B,cAHC;AAIDmB,sBAAM,SAJL;AAKDC,sBAAM,IALL;;AAODC,oCAAoB,aAPnB;AAQDC,mCAAmB,QARlB;AASDC,gCAAgB,IATf;AAUDC,+BAAe;;AAVd,aAAL,EAaA,UAAUC,SAAV,EAAqB;;AAEjB,oBAAI,CAACA,SAAL,EAAgB;;AAEZ1B,4BAAQJ,GAAR,CAAY,EAAZ;;AAEAqB,yBAAK;AACDI,8BAAM,IADL;AAEDH,+BAAO,YAFN;AAGDC,wEAHC;AAIDC,8BAAM;AAJL,qBAAL;AAOH;AAEJ,aA5BD;AA8BH","file":"ClientCheckEmailService.js","sourcesContent":["class ClientCheckEmailService {\n\n    static ckeckEmailExists() {\n\n        $(document).on('blur', 'input[name=\"email_primary\"]', function () {\n\n            let email = $(this).val();\n\n            if(ValidateHelper.validateEmail( email ) ) {\n                ClientCheckEmailService._checkData( email );\n            }\n\n        });\n\n        $(document).on('blur', 'input[name=\"email_secondary\"]', function () {\n\n            let email = $(this).val();\n\n            if(ValidateHelper.validateEmail( email ) ) {\n                ClientCheckEmailService._checkData( email );\n            }\n\n        });\n\n    }\n\n    static _checkData(email, element) {\n\n        let cpf_cnpj = $('input[name=\"cpf_cnpj\"]')\n                        .val()\n                        .replace(/[^0-9]/g, '').toString();\n\n        let parameters = {\n            data: {\n                email,\n                cpf_cnpj\n            },\n            url: '/admin/ajax/client/check/email/'\n        };\n\n        let response = HttpService.ajax(parameters);\n\n        response.done((res) => {\n            if(res.id > 0 ) {\n                ClientCheckEmailService.boxSwal(element, res.company_name, res.cpf_cnpj)\n            }\n        });\n\n        response.fail(() => {\n            //alert('Houve um erro na solicitação do pedido, tente novamente!');\n            //location.reload();\n        });\n\n    }\n\n    static boxSwal(element, nameCompany, cpf_cnpj) {\n\n        swal({\n\n            title: `Endereço de email já está em uso por: <br /><span style='color:red'><strong>${nameCompany}.</strong></span>`,\n            text: `CPF/CNPJ <strong>${cpf_cnpj}</strong>`,\n            type: \"warning\",\n            html: true,\n\n            confirmButtonClass: \"btn-success\",\n            confirmButtonText: \"OK ???\",\n            closeOnConfirm: true,\n            closeOnCancel: false\n\n        },\n        function (isConfirm) {\n\n            if (!isConfirm) {\n\n                element.val('');\n\n                swal({\n                    html: true,\n                    title: \"Cancelado!\",\n                    text: `Cadastro de email cancelado com sucesso.`,\n                    type: \"success\"\n                });\n\n            }\n\n        });\n\n    }\n\n}\n"]}