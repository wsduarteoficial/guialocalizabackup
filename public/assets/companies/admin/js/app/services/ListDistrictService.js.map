{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/services/ListDistrictService.js"],"names":["ListDistrictService","element","$","on","elemStatus","_changeStatus","event","preventDefault","values","parameters","response","serialize","fadeOut","modal","data","url","HttpService","ajax","done","id","_trTable","toastr","exists","alert","name","location","reload","fail","submit","district_id","text","setInterval","textContent","element_html","district_name","dataTo","confirm","icon","type","typeAnimated","title","content","buttons","cancel","keys","action","btnClass","parents","addClass","hide","document","typeStatus","is","val","removeClass","active","html","city_state","prepend","bootstrapToggle"],"mappings":"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","file":"ListDistrictService.js","sourcesContent":["class ListDistrictService {\n\n    updateStatus(element) {\n\n        $(element).on('change', function () {\n\n            let elemStatus = $(this);\n            ListDistrictService._changeStatus(elemStatus);\n\n        });\n    }\n\n    static changeStatusDocument(document) {\n\n        ListDistrictService._changeStatus(document);\n    }\n\n    static _changeStatus(elemStatus) {\n\n        let textContent,\n            typeStatus,\n            dataTo,\n            parameters, \n            response;            \n\n        if (elemStatus.is(\":checked\")) {\n            typeStatus = 'ON';\n        } else {\n            typeStatus = 'OFF';\n        }\n\n        textContent = `Tem certeza que deseja mudar o status para <strong>${typeStatus}</strong>\n            em <strong>${elemStatus.data('name')}</strong>?`;\n\n        $.confirm({\n            icon: 'fa fa-info-circle',\n            type: 'dark',\n            typeAnimated: true,\n            title: 'Confirmação!',\n            content: textContent,\n            buttons: {\n                cancel: {\n                    text: 'Cancelar',\n                    keys: ['esc'],\n                    action: function () {\n                        $.alert('Cancelado!');\n                        location.reload();\n                    }\n\n                },\n\n                confirm: {\n                    text: 'Confirmar',\n                    btnClass: 'btn-blue',\n                    keys: ['enter'],\n                    action: function () {\n\n                        if (elemStatus.is(\":checked\")) {\n\n                            elemStatus.val(1).parents('tr')\n                                .addClass('color_status');\n\n                        } else {\n\n                            elemStatus.val(0).parents('tr')\n                                .removeClass('color_status');\n                        }\n\n                        dataTo = {\n                            id: elemStatus.data('id'),\n                            active: elemStatus.val()\n                        };\n\n                        parameters = {\n                            data: dataTo,\n                            url: '/admin/ajax/district/update/status/'\n                        };\n\n                        response = HttpService.ajax(parameters);\n\n                        response.done((data) => {\n\n                            if (data.active <= 0) {\n                                toastr[\"info\"](\"Bairro foi desativado com sucesso!\");\n                            } else {\n                                toastr[\"success\"](\"Bairro foi ativado com sucesso!\");\n                            }\n\n                        });\n\n                        response.fail(() => {\n                            //alert('Houve um erro na solicitação do pedido!');\n                            location.reload();\n                        });\n\n                    }\n\n                }\n\n            }\n\n        });\n    }\n\n    registerDistrict(element) {\n\n        $(element).on('submit', function( event ) {\n            \n            event.preventDefault();\n\n            let values, parameters, response;\n                        \n            values = $(this).serialize();           \n\n            $('.modal-register').fadeOut('5000', function() {\n\n                $(this).modal('hide');\n                \n            });\n\n            parameters = {\n                data: values,\n                url: '/admin/ajax/district/register/'\n            };\n\n            response = HttpService.ajax(parameters);\n\n            response.done((data) => {\n           \n                if (data.id>0) {\n\n                    ListDistrictService._trTable(data);\n\n                    toastr[\"success\"](\"Novo bairro cadastrado com sucesso!\");\n                }\n                else {\n                    if (data.exists===true) {\n                        alert(`Bairro ${data.name} já existe na base de dados!`);\n                    } else {\n                        //alert('Houve um erro na solicitação do pedido!');\n                        location.reload();\n\n                    }\n                }\n\n            });\n\n            response.fail(() => {\n                //alert('Houve um erro na solicitação do pedido!');\n                location.reload();\n            });    \n\n        });\n\n    }\n\n    static _trTable(data) {\n\n        let html;\n\n        html = `\n            <tr class=\"odd gradeX color_status\">\n            <td>${data.id}</td>\n            <td>${data.name}</td>\n            <td>${data.city_state}</td>\n\n            <td class=\"center\">  \n                <input type=\"checkbox\" id=\"toogle-register\" class=\"jq_status_district\" value=\"0\" data-id=\"${data.id}\" data-name=\"${data.name}\" data-toggle=\"toggle\" data-onstyle=\"success\"> \n            </td>\n          \n            <td>\n                <div class=\"btn-group\">\n                    <button class=\"btn btn-xs green dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\"> Ação\n                        <i class=\"fa fa-angle-down\"></i>\n                    </button>\n                    <ul class=\"dropdown-menu\" role=\"menu\">\n                        \n                        <li>                   \n                            <a href=\"#\"  data-id=\"${data.id}\" data-name=\"${data.name}\" onclick=\"ListDistrictController.setDataModalEdit(this.getAttribute('data-id'), this.getAttribute('data-name') );\"  data-target=\".modal-edit\" data-toggle=\"modal\">\n                                <i class=\"fa fa-edit\"></i> Editar \n                            </a>\n                        </li>\n\n                        <li>\n                            <a href=\"#\" class=\"jq_remove_district\">\n                                <i class=\"fa fa-times\"></i> Remover </a>\n                        </li>\n                  \n                    </ul>\n                </div>\n            </td>\n\n        </tr>`;\n      \n\n        $(\".appendedContainer\").prepend(html);\n        $('#toogle-register').bootstrapToggle();\n        $.alert('Dados cadastrados com Sucesso. <br>Atualizando lista de registros!');\n\n        setInterval(() => {\n          location.reload();\n        }, 3000);\n               \n\n    }\n\n    editDistrict(element) {\n\n        $(element).submit(function( event ) {            \n          \n            event.preventDefault();\n\n            let values, parameters, response;\n            \n            values = $(this).serialize();          \n\n            $('.modal-edit').fadeOut('5000', function() {\n                $(this).modal('hide');                \n            });\n\n            parameters = {\n                data: values,\n                url: '/admin/ajax/district/edit/'\n            };\n\n            response = HttpService.ajax(parameters);\n\n            response.done((data) => {\n\n                if (data.district_id > 0) {   \n\n                    $(`.jq_district_name_${data.district_id}`).text(data.name);              \n                    toastr[\"success\"](\"Bairro alterado com sucesso!\");\n\n                    $.alert('Dados alterados com Sucesso. <br>Atualizando lista de registros!');\n\n                    setInterval(() => {\n                      location.reload();\n                    }, 3000);\n                    \n                }\n                else {\n                    \n                    if (data.exists===true) {\n                        alert(`Bairro ${data.name} já existe na base de dados!`);\n                    } else {\n                        //alert('Houve um erro na solicitação do pedido!');\n                        location.reload();\n\n                    }\n                }\n\n            });\n\n            response.fail(() => {\n                //alert('Houve um erro na solicitação do pedido!');\n                location.reload();\n            });\n\n        });\n\n    }\n\n    removeDistrict(element) {\n\n        $(element).on('click', function() {\n\n            let textContent,\n            element_html,\n            district_name,\n            district_id,\n            dataTo,\n            parameters, \n            response;\n\n            element_html = $(this);\n            district_id = $(this).data('id');\n            district_name = $(this).data('name');            \n\n            textContent = `Tem certeza que deseja remover o bairro <strong>${district_name}</strong> permanentemente?`;\n\n            $.confirm({\n                icon: 'fa fa-info-circle',\n                type: 'dark',\n                typeAnimated: true,\n                title: 'Confirmação!',\n                content: textContent,\n                buttons: {\n                    cancel: {\n                        text: 'Cancelar',\n                        keys: ['esc'],\n                        action: function () {\n                            $.alert('Cancelado!');\n                        }\n\n                    },\n\n                    confirm: {\n                        text: 'Confirmar',\n                        btnClass: 'btn-blue',\n                        keys: ['enter'],\n                        action: function () {\n\n                            element_html.parents('tr')\n                            .addClass('item_inative').hide(4000);\n\n                            dataTo = {\n                                id: district_id,\n                            };\n\n                            parameters = {\n                                data: dataTo,\n                                url: '/admin/ajax/district/remove/'\n                            };\n\n                            response = HttpService.ajax(parameters);\n\n                            response.done((data) => {\n\n                                if (data) {\n                                    toastr[\"success\"](\"O Bairro foi excluído com sucesso!\");    \n                                } else {\n                                    //alert('Houve um erro na solicitação do pedido!');\n                                    location.reload();\n                                }                                \n\n                            });\n\n                            response.fail(() => {\n                                //alert('Houve um erro na solicitação do pedido!');\n                                location.reload();\n                            });\n\n                        }\n\n                    }\n\n                }\n\n            });\n\n        });\n\n    }\n\n}\n"]}