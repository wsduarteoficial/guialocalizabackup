{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/services/CheckRegisteredPhone.js"],"names":["CheckRegisteredPhone","$","document","on","number","val","element","length","_check","numberCheckDb","replace","company_id","attr","parameters","data","url","response","HttpService","ajax","done","obj","Object","keys","forEach","value","key","v","name_fantasy","boxSwal","pivot","fail","nameCompany","swal","title","text","type","html","showCancelButton","cancelButtonClass","cancelButtonText","confirmButtonClass","confirmButtonText","closeOnConfirm","closeOnCancel","isConfirm"],"mappings":"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","file":"CheckRegisteredPhone.js","sourcesContent":["class CheckRegisteredPhone {\n\n\tstatic fixed() {\n\n\t\t$(document).on('blur', 'input[name=\"phone_fixed[]\"]', function () {\n\n\t\t\tlet number = $(this).val();\n\t\t\tlet element = $(this);\n\n\t\t\tif (number.length >= 10) {\n\t\t\t\tCheckRegisteredPhone._check(number, element);\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tstatic cell() {\n\n\t\t$(document).on('blur', 'input[name=\"phone_cell[]\"]', function () {\n\n\t\t\tlet number = $(this).val();\n\t\t\tlet element = $(this);\n\n\t\t\tif (number.length >= 11) {\n\t\t\t\tCheckRegisteredPhone._check(number, element);\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tstatic others() {\n\n\t\t$(document).on('blur', 'input[name=\"phone_others[]\"]', function () {\n\n\t\t\tlet number = $(this).val();\n\t\t\tlet element = $(this);\t\t\n\n\t\t\tif (number.length > 1) {\n\t\t\t\tCheckRegisteredPhone._check(number, element);\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\tstatic _check(number, element) {\n\n\t\tlet numberCheckDb = number.replace(/[^\\d]+/g,'');\n\t\tlet company_id = $('meta[name=\"company_id\"]').attr(\"content\");\n\n\t\tlet parameters = {\n\t\t\tdata: { \n\t\t\t\tcompany_id: company_id,\n\t\t\t\tnumber: numberCheckDb \n\t\t\t},\n\t\t\turl: '/admin/ajax/phone/check/'\n\t\t};\n\n\t\tlet response = HttpService.ajax(parameters);\n\n\t\tresponse.done((obj) => {                    \n\n\t\t\tObject.keys(obj).forEach(key => {\n\t\t\t\tlet value = obj[key];\n\t\t\t\tObject.keys(value).forEach(key => {\n\t\t\t\t\tlet v = value[key];\n\t\t\t\t\tif (v.name_fantasy !=='undefined' && v.name_fantasy) {\n\t\t\t\t\t\tCheckRegisteredPhone.boxSwal(element, v.name_fantasy, number, v.pivot.company_id)\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t\tresponse.fail(() => {\n\t\t\t//alert('Houve um erro na solicitação do pedido, tente novamente!');\n\t\t\t//location.reload();\n\t\t});\n\n\t}\n\n\tstatic boxSwal(element, nameCompany, number, company_id) {\n\t\n\t\tswal({\n\n\t\t\ttitle: `Números <span style='color:red'><strong>${number}</strong></span> já cadastrado em nome <br />de <b> <a href=\"/admin/empresa/${ company_id }/editar\" target=\"_BLANK\">${nameCompany} </a></b>.`,\n\t\t\ttext: \"Deseja criar novo cadastro usando o mesmo número?\",\n\t\t\ttype: \"warning\",\n\t\t\thtml: true,\n\n\t\t\tshowCancelButton: true,\n\t\t\tcancelButtonClass: \"btn-danger\",\n\t\t\tcancelButtonText: \"NÃO\",\n\t\t\tconfirmButtonClass: \"btn-success\",\n\t\t\tconfirmButtonText: \"SIM\",\n\t\t\tcloseOnConfirm: true,\n\t\t\tcloseOnCancel: false\n\n\t\t},\n\t\tfunction (isConfirm) {\n\n\t\t\tif (!isConfirm) {\n\n\t\t\t\telement.val('');\n\n\t\t\t\tswal({\n\t\t\t\t\thtml: true,\n\t\t\t\t\ttitle: \"Cancelado!\",\n\t\t\t\t\ttext: `Cadastro de telefone cancelado com sucesso.`,\n\t\t\t\t\ttype: \"success\"\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t});\n\n\t}\n\n}\n"]}