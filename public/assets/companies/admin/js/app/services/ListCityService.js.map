{"version":3,"sources":["../../../../../../../resources/assets/js/src/companies/admin/app-es6/services/ListCityService.js"],"names":["ListCityService","element","$","on","elemStatus","_changeStatus","event","preventDefault","values","parameters","response","serialize","fadeOut","modal","data","url","HttpService","ajax","done","exists","alert","name","val","id","_trTable","toastr","location","reload","fail","submit","city_id","text","setInterval","textContent","element_html","city_name","dataTo","confirm","icon","type","typeAnimated","title","content","buttons","cancel","keys","action","btnClass","parents","addClass","hide","document","typeStatus","is","removeClass","active","html","name_state","prepend","bootstrapToggle"],"mappings":"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","file":"ListCityService.js","sourcesContent":["class ListCityService {\n\n    updateStatus(element) {\n\n        $(element).on('change', function () {\n\n            let elemStatus = $(this);\n            ListCityService._changeStatus(elemStatus);\n\n        });\n    }\n\n    static changeStatusDocument(document) {\n\n        ListCityService._changeStatus(document);\n    }\n\n    static _changeStatus(elemStatus) {\n\n        let textContent,\n            typeStatus,\n            dataTo,\n            parameters, \n            response;            \n\n        if (elemStatus.is(\":checked\")) {\n            typeStatus = 'ON';\n        } else {\n            typeStatus = 'OFF';\n        }\n\n        textContent = `Tem certeza que deseja mudar o status para <strong>${typeStatus}</strong>\n            em <strong>${elemStatus.data('name')}</strong>?`;\n\n        $.confirm({\n            icon: 'fa fa-info-circle',\n            type: 'dark',\n            typeAnimated: true,\n            title: 'Confirmação!',\n            content: textContent,\n            buttons: {\n                cancel: {\n                    text: 'Cancelar',\n                    keys: ['esc'],\n                    action: function () {\n                        $.alert('Cancelado!');\n                        location.reload();\n                    }\n\n                },\n\n                confirm: {\n                    text: 'Confirmar',\n                    btnClass: 'btn-blue',\n                    keys: ['enter'],\n                    action: function () {\n\n                        if (elemStatus.is(\":checked\")) {\n\n                            elemStatus.val(1).parents('tr')\n                                .addClass('color_status');\n\n                        } else {\n\n                            elemStatus.val(0).parents('tr')\n                                .removeClass('color_status');\n                        }\n\n                        dataTo = {\n                            id: elemStatus.data('id'),\n                            active: elemStatus.val()\n                        };\n\n                        parameters = {\n                            data: dataTo,\n                            url: '/admin/ajax/city/update/status/'\n                        };\n\n                        response = HttpService.ajax(parameters);\n\n                        response.done((data) => {\n\n                            if (data.active <= 0) {\n                                toastr[\"info\"](\"Cidade foi desativada com sucesso!\");\n                            } else {\n                                toastr[\"success\"](\"Cidade foi ativada com sucesso!\");\n                            }\n\n                        });\n\n                        response.fail(() => {\n                            //alert('Houve um erro na solicitação do pedido!');\n                            location.reload();\n                        });\n\n                    }\n\n                }\n\n            }\n\n        });\n    }\n\n    registerCity(element) {\n\n        $(element).on('submit', function( event ) {\n            \n            event.preventDefault();\n\n            let values, parameters, response;\n                        \n            values = $(this).serialize();           \n\n            $('.modal-register').fadeOut('5000', function() {\n                $(this).modal('hide');\n            });\n\n            parameters = {\n                data: values,\n                url: '/admin/ajax/city/register/'\n            };\n\n            response = HttpService.ajax(parameters);\n\n            response.done((data) => {\n\n                if (data.exists === true) {\n                    \n                    alert(`A cidade ${data.name}, já existe na base de dados!`);\n                    $('#value-city-name').val('');\n\n                } else if (data.id>0) {\n\n                    ListCityService._trTable(data);\n\n                    toastr[\"success\"](\"Nova cidade cadastrada com sucesso!\");\n                }\n                else {\n                    if (data.exists===true) {\n                        alert(`Cidade ${data.name} já existe na base de dados!`);\n                    } else {\n                        //alert('Houve um erro na solicitação do pedido!');\n                        location.reload();\n\n                    }\n                }\n\n            });\n\n            response.fail(() => {\n                //alert('Houve um erro na solicitação do pedido!');\n                location.reload();\n            });    \n\n        });\n\n    }\n\n    static _trTable(data) {\n\n        let html;\n\n        html = `\n            <tr class=\"odd gradeX color_status\">\n            <td>${data.id}</td>\n            <td>${data.name}</td>\n            <td>${data.name_state}</td>\n\n            <td class=\"center\">  \n                <input type=\"checkbox\" id=\"toogle-register\" class=\"jq_status_city\" value=\"0\" data-id=\"${data.id}\" data-name=\"${data.name}\" data-toggle=\"toggle\" data-onstyle=\"success\"> \n            </td>\n          \n            <td>\n                <div class=\"btn-group\">\n                    <button class=\"btn btn-xs green dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-expanded=\"false\"> Ação\n                        <i class=\"fa fa-angle-down\"></i>\n                    </button>\n                    <ul class=\"dropdown-menu\" role=\"menu\">\n                        \n                        <li>                   \n                            <a href=\"#\"  data-id=\"${data.id}\" data-name=\"${data.name}\" onclick=\"ListCityController.setDataModalEdit(this.getAttribute('data-id'), this.getAttribute('data-name') );\"  data-target=\".modal-edit\" data-toggle=\"modal\">\n                                <i class=\"fa fa-edit\"></i> Editar \n                            </a>\n                        </li>\n\n                        <li>\n                            <a href=\"#\" class=\"jq_remove_city\">\n                                <i class=\"fa fa-times\"></i> Remover </a>\n                        </li>\n                        \n                        <li>\n                            <a href=\"javascript:;\">\n                                <i class=\"fa fa-circle\"></i> Ver Bairros </a>\n                        </li>\n\n                        <li>\n                            <a href=\"javascript:;\">\n                                <i class=\"fa fa-circle\"></i> Ver CEPs </a>\n                        </li>\n\n                        <li>\n                            <a href=\"javascript:;\">\n                                <i class=\"fa fa-circle\"></i> Ver Logradouros </a>\n                        </li>                        \n\n                    </ul>\n                </div>\n            </td>\n\n        </tr>`;\n      \n\n        $(\".appendedContainer\").prepend(html);\n        $('#toogle-register').bootstrapToggle();\n        $.alert('Dados cadastrados com Sucesso. <br>Atualizando lista de registros!');\n\n        setInterval(() => {\n          location.reload();\n        }, 3000);\n               \n\n    }\n\n    editCity(element) {\n\n        $(element).submit(function( event ) {            \n          \n            event.preventDefault();\n\n            let values, parameters, response;\n            \n            values = $(this).serialize();          \n\n            $('.modal-edit').fadeOut('5000', function() {\n                $(this).modal('hide');                \n            });           \n\n            parameters = {\n                data: values,\n                url: '/admin/ajax/city/edit/'\n            };\n\n            response = HttpService.ajax(parameters);\n\n            response.done((data) => {\n\n                if (data.city_id > 0) { \n                                \n                    $(`.jq_city_name_${data.city_id}`).text(data.name);              \n                  \n                    toastr[\"success\"](\"Cidade alterada com sucesso!\");\n\n                    $.alert('Dados alterados com Sucesso. <br>Atualizando lista de registros!');\n\n                    setInterval(() => {\n                      location.reload();\n                    }, 3000);\n\n                }\n                else {\n                    if (data.exists===true) {\n                        alert(`Cidade ${data.name} já existe na base de dados!`);\n                    } else {\n                        //alert('Houve um erro na solicitação do pedido!');\n                        location.reload();\n\n                    }\n                }\n\n            });\n\n            response.fail(() => {\n                //alert('Houve um erro na solicitação do pedido!');\n                location.reload();\n            });\n\n        });\n\n    }\n\n    removeCity(element) {\n\n        $(element).on('click', function() {\n\n            let textContent,\n            element_html,\n            city_name,\n            city_id,\n            dataTo,\n            parameters, \n            response;\n\n            element_html = $(this);\n            city_id = $(this).data('id');\n            city_name = $(this).data('name');            \n\n            textContent = `Tem certeza que deseja remover a cidade <strong>${city_name}</strong> permanentemente?`;\n\n            $.confirm({\n                icon: 'fa fa-info-circle',\n                type: 'dark',\n                typeAnimated: true,\n                title: 'Confirmação!',\n                content: textContent,\n                buttons: {\n                    cancel: {\n                        text: 'Cancelar',\n                        keys: ['esc'],\n                        action: function () {\n                            $.alert('Cancelado!');\n                        }\n\n                    },\n\n                    confirm: {\n                        text: 'Confirmar',\n                        btnClass: 'btn-blue',\n                        keys: ['enter'],\n                        action: function () {\n\n                            element_html.parents('tr')\n                            .addClass('item_inative').hide(4000);\n\n                            dataTo = {\n                                id: city_id,\n                            };\n\n                            parameters = {\n                                data: dataTo,\n                                url: '/admin/ajax/city/remove/'\n                            };\n\n                            response = HttpService.ajax(parameters);\n\n                            response.done((data) => {\n\n                                if (data) {\n                                    toastr[\"success\"](\"Cidade foi excluída com sucesso!\");    \n                                } else {\n                                    //alert('Houve um erro na solicitação do pedido!');\n                                    location.reload();\n                                }                                \n\n                            });\n\n                            response.fail(() => {\n                                //alert('Houve um erro na solicitação do pedido!');\n                                location.reload();\n                            });\n\n                        }\n\n                    }\n\n                }\n\n            });\n\n        });\n\n    }\n\n}\n"]}